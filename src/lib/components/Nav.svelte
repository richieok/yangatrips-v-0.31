<script>
    import { onMount } from "svelte";
    import { afterNavigate } from "$app/navigation";
    import { page } from "$app/stores";
    // import {navData} from "./mystores";
    // const logo =
    //     "https://s3.eu-west-3.amazonaws.com/yangatrips.com/images/1ed133ba-f9ac-4c94-accc-7bbe0b4d1be3.JPG";

    // const phone = "+234 803 888 5165";
    let x = 0;
    let width;
    let regAbout = /^\/about(?:\/[0-9a-zA-Z]+)?$/;
    let regTours = /^\/tours(?:\/[0-9a-zA-Z]+)?$/;

    afterNavigate(() => {
        updateMenuList();
        // let a2 = document.querySelector(`a.active`)
        // width = a2.parentNode.clientWidth
        // x = a2.parentNode.offsetLeft
    });
    const updateMenuList = () => {
        let a2 = document.querySelector(`a.active`);
        if (!a2) {
            return;
        }
        width = a2.parentNode.clientWidth;
        x = a2.parentNode.offsetLeft;
        let b = a2.parentNode.getBoundingClientRect();
        // console.log(b);
        // console.log(`offsetLeft: ${x}. width: ${width}`);
    };
    const ulResize = () => {
        console.log("ul resize");
        updateMenuList();
    };
    onMount(() => {
        updateMenuList();
    });
</script>

<nav>
    <div class="logo">
        <a href="/">
            <!-- <img src="/yanga-img.JPG" alt="logo" /> -->
            <svg
                xmlns="http://www.w3.org/2000/svg"
                xml:space="preserve"
                id="svg5"
                version="1.1"
                viewBox="0 0 165.578 31.308"
                ><g id="layer1" transform="translate(129.717 -214.49)"
                    ><g id="g4918" transform="translate(6.922 45.305)"
                        ><path
                            id="path4922"
                            d="m-91.018 200.312-2.667-.137-1.42-.11-1.42-.112v-.364l1.31-4.061 1.308-4.06.06-.064.058-.062 3.063.616 3.063.617 2.065.347 2.065.348 2.409.337 2.409.336 2.408.268 2.41.267 3.01.253 3.012.254 4.301.199 4.302.199 5.248-.106 5.248-.107 2.409-.174 2.409-.173 2.667-.27 2.667-.271 2.925-.413 2.925-.412 2.237-.426 2.236-.426 1.291-.274 1.29-.274 2.41-.605 2.408-.604 1.72-.501 1.722-.501 2.236-.798 2.237-.798.43-.135.43-.135 1.807-.72 1.807-.719 1.979-.89 1.978-.89-.3-.057-.302-.059v-.647l-.56-.097-.558-.096-1.119-.163-1.118-.163-1.377-.259-1.376-.258-.508-.006-.507-.006.163-.154.164-.154.825-.171.826-.171 2.1.15 2.099.148 1.077.07 1.078.07.069-.111.069-.112-.484-1.288-.483-1.288-.456-1.29-.455-1.291-.214-.43-.214-.429-4.587-.86-4.588-.862-.654-.584-.654-.584.377-.17.378-.169.827.49.827.489 1.118.118 1.119.117 4.387.445 4.388.444 4.043.344 4.044.344 1.635.018 1.634.018.485-.187.484-.187H10.7l4.503-2.068 4.502-2.069.345-.205.344-.205 1.376-.67 1.377-.668 1.275-.327 1.275-.326H27.316l.412.301.413.301.342.19.342.19.057.386.057.387-.095.382-.096.381-.736.742-.736.741-1.163.762-1.163.762-2.833 1.377-2.834 1.377-.09.146-.09.145.762.447.762.446h.841l.732-.258.732-.258h1.005l.44.44.44.44-.072.613-.071.612.785.337.785.338.308-.191.308-.192.164.102.164.101.176.328.175.327-.722.194-.722.195-1.388-.205-1.388-.205-.655.007-.655.007-.868.288-.868.289-.421-.192-.42-.192h-.857l.179-.333.178-.334-.147-.09-.147-.092-.664.339-.664.338h-.48l.107-.43.108-.43-.218.006-.219.006-.43.246-.43.246-.393.006-.393.006.184-.344.184-.344h-.175l-1.338.668-1.338.668-.388.118-.387.118-1.358.136-1.358.137-1.783.862-1.782.862-1.548.385-1.548.384-.288.254-.288.255-1.632-.278-1.632-.278-3.07 1.521-3.07 1.522-.688.278-.688.28-2.523 1.03-2.523 1.03-3.413 1.123-3.414 1.123-2.409.686-2.409.687-3.269.788-3.269.788-.688.18-.689.179-1.826.404-1.827.404-3.507.615-3.508.615-3.01.426-3.012.426-3.097.35-3.097.352-3.011.265-3.011.266-4.56.247-4.56.248-8.345-.022-8.345-.022zM.52 181.66v-.086H.348v.172H.52Zm.516-.172v-.086H.864v.172h.172zm.345-.172v-.086h-.172v.172h.172zm.458-.372-.114-.115v.459l.114-.115.115-.115zm.574-.144v-.086h-.172v.172h.172zm.287-.2-.115-.115v.459l.115-.115.114-.115zm-.124-.897 1.625-.825.063-.188.062-.189-.798-.12-.798-.119-.424.194-.425.193h-.868l.108-.338.107-.338-.473-.12-.472-.118-.744.2-.744.198h-.696l.171-.32.171-.32-.43-.196-.432-.196h-.696l.342.473.341.473 1.176 1.248 1.177 1.247.515-.006.516-.006 1.626-.826zm.697.753v-.086h-.172v.172h.172zm.344-.172v-.086h-.172v.172h.172zm.517-.172v-.086h-.172v.172h.172zm.803-.545-.115-.115v.46l.115-.116.114-.114zm.573-.143v-.086h-.172v.172h.172zm12.56-6.195v-.086H17.9v.172h.172zm.46-.373-.115-.114v.459l.115-.115.114-.115zm.401.03v-.087h-.172v.172h.172zm.516-.345v-.086h-.172v.172h.172zm.517-.172v-.086h-.172v.172h.172zm.344-.172v-.086h-.172v.172h.172zm.516-.172v-.086h-.172v.172h.172zm.459-.2-.115-.116-.115.115-.114.115h.459zm.401-.144v-.086h-.172v.172h.172zm.516-.172v-.086h-.172v.172h.172zm.287-.373-.115-.115v.459l.115-.115.115-.114zm3.757-1.262.106-.172h-.344l-.106.172-.107.172h.345zm.545-.115-.115-.114-.115.114-.114.115h.459zm.66-.057.106-.172h-.557l.106.172.107.172h.131zm-117.377 21.221.114-.114.115.114.115.115h-.459zm-22.426-11.327v-.086h.172v.172h-.172zm27.53-2.41v-.085h.172v.172h-.172z"
                            style="fill:#d9a72c;fill-opacity:.997647;stroke-width:1.00013;stroke-dasharray:none"
                        /><path
                            id="path4920"
                            d="M-39.743 183.652v-9.65h2.753v1.716l.904-.685.903-.685.86-.29.86-.29 1.119-.008 1.118-.008.947.307.946.307.803.584.803.583.501.74.501.74.31.774.308.774.087 1.57.087 1.57-.218.925-.218.925-.412.823-.413.824-.7.699-.699.7-1.127.527-1.127.528-1.308.012-1.307.013-.86-.3-.861-.3-.903-.685-.904-.685v7.189l-.903.112-.903.111-.474.09-.473.091v-9.65zm8.64 1.17.639-.324.372-.387.372-.387.444-.946.444-.946.002-1.205.002-1.204-.38-.784-.381-.784-.548-.56-.548-.56-.614-.262-.615-.26-.985-.005-.986-.004-.762.37-.763.369-.61.895-.61.896-.202.827-.203.826.104.884.105.883.448.915.447.916.601.458.601.458.806.221.805.22.688-.098.688-.1.639-.323zm-53.428 7.1-1.686-.283.873-.398.874-.397.422-.639.423-.639.175-.922.175-.923v-2.018h-.28l-.48.5-.479.5-1.058.477-1.058.476-1.29.01-1.291.011-.86-.325-.861-.326-.74-.503-.74-.504-.59-.803-.588-.804-.268-.792-.268-.792-.168-1.043-.168-1.043.168-1.185.168-1.186.426-.963.426-.962.53-.605.531-.604.836-.536.835-.536 1.248-.26 1.247-.26.794.117.795.117.677.238.678.237.914.69.914.69V174.003h2.753v14.735l-.273.934-.274.935-.519.817-.519.817-.369-.018-.369-.018-1.686-.283zm-.908-7.238.847-.47.487-.862.487-.862.177-.955.176-.955-.185-.837-.185-.837-.538-.892-.538-.892-.842-.458-.843-.459h-2.033l-.739.357-.738.358-.563.732-.563.733-.271.934-.272.934.11.961.11.962.44.904.44.904.749.515.75.516.656.158.657.159.688-.089.689-.088zm-6.687 5.816-1.365-.33-.033-.04-.032-.04-.12-.387-.118-.387h2.948v.398l.439.575.439.576-.396-.018-.396-.017zm-26.184-2.975-.88-.214-.78-.457-.781-.457-.688-.782-.688-.78-.3-.634-.3-.634-.232-.868-.231-.867v-2.237l.232-.86.233-.861.271-.642.272-.641.824-.881.824-.881.789-.4.788-.4 1.065-.193 1.064-.193 1.066.194 1.066.193.65.331.65.332.607.533.607.533v-1.756h2.925v13.42h-2.925v-1.756l-.607.533-.607.533-.64.324-.64.324-.913.193-.912.194-.464-.015-.465-.014-.88-.214zm3.805-2.64.516-.254.484-.453.484-.453.353-.775.354-.774.087-1.22.087-1.218-.354-.798-.353-.8-.548-.681-.548-.682-.711-.286-.711-.285h-.982l-.981-.001-.731.404-.731.405-.56.735-.561.736-.178.64-.178.642-.001 1-.001 1 .372.893.372.892.445.489.446.488.467.244.468.245.65.15.651.15.689-.09.688-.09.516-.253zm39.665 2.607-.942-.253-.707-.415-.707-.414-.65-.72-.65-.72-.401-.881-.4-.881-.204-1.182-.203-1.182.11-.969.112-.969.28-.86.279-.86.489-.716.488-.716.72-.616.72-.616.96-.37.96-.37 1.377-.01 1.376-.009 1.033.473 1.032.473.56.54.558.541v-1.788h2.925v13.421h-2.925v-1.756l-.607.533-.607.533-.64.324-.64.324-.912.193-.912.193-.465-.011-.465-.011-.942-.254zm3.954-2.654.602-.308.463-.489.463-.489.35-.774.35-.774.005-1.253.003-1.253-.255-.612-.256-.612-.538-.68-.538-.68-.682-.347-.68-.347-1.008-.015-1.008-.014-.821.411-.822.412-.565.832-.564.832-.194.717-.194.716.082 1.036.082 1.035.451.89.45.889.618.47.616.471.806.22.805.221.688-.099.688-.099.603-.307zm49.21 2.69-.946-.21-.689-.362-.688-.363-.54-.574-.54-.574-.256-.516-.257-.517-.12-.559-.12-.559h2.928l.118.387.117.387.367.41.368.409.554.236.553.236h1.399l.554-.235.553-.234.313-.352.314-.351-.055-.57-.056-.57-.545-.366-.546-.367-1.95-.563-1.948-.563-.838-.448-.838-.448-.453-.593-.452-.594v-2.834l.53-.66.529-.662.852-.464.852-.464 1.158-.185 1.157-.185 1.003.162 1.003.161.587.246.588.247.583.492.584.492.404.867.404.868.002.473.001.473h-2.7l-.264-.67-.263-.671-.445-.291-.444-.292-.684-.091-.684-.092-.632.119-.633.118-.41.411-.411.411v1.001l.444.445.445.444.803.255.803.256 1.466.435 1.466.436.803.532.802.531.355.734.356.734V184.51l-.267.637-.266.637-.379.407-.379.406-.781.398-.781.398-1.014.187-1.015.188-.441-.015-.442-.014zm-109.433-3.199v-3.094l-2.343-4.52-2.343-4.52-.305-.515-.304-.516-.117-.388-.117-.387h3.059l.407.904.408.903 1.15 2.409 1.151 2.409.356.817.355.817h.21l.436-.99.436-.988.526-1.119.527-1.118.92-1.979.921-1.979 1.55-.05 1.548-.049v.237l-1.355 2.598-1.355 2.598-1.398 2.698-1.398 2.698V187.424h-2.925zm23.573-3.616v-6.71h2.753v1.394l.568-.434.57-.434.85-.377.85-.377h1.205l1.205-.002.704.2.705.2.737.496.737.495.492.733.493.734.206.622.207.621.063 4.775.063 4.775H-97.9v-8.032l-.237-.79-.238-.789-.361-.507-.361-.508-.618-.293-.618-.293-1.01.005-1.009.005-.713.364-.714.364-.458.979-.46.978-.058 4.259-.058 4.258h-2.722zm47.318-.602v-7.313h-4.646v-2.409h16.017l-.05 1.162-.051 1.161-4.259.046-4.258.046v14.62h-2.753zm8.259.602v-6.71h2.753V175.776l.633-.652.633-.652.7-.306.7-.306.689-.058.688-.058.05 1.396.05 1.395-1.039.094-1.038.094-.56.326-.56.326-.43.766-.43.765-.059 4.259-.058 4.259h-2.722zm7.57 2.065v-4.646h2.753v9.292h-2.753zm.478-6.11-.469-.263-.176-.33-.177-.33v-1.334l.524-.501.523-.502h1.303l.451.296.451.295.174.627.173.628-.224.536-.224.535-.278.231-.278.23-.652.074-.652.073z"
                            style="fill:#1e45b9;stroke-width:.999999"
                        /></g
                    ></g
                ></svg
            >
        </a>
    </div>
    <ul on:resize={ulResize}>
        <li>
            <!-- <div class="sweeper" style="left: {x - 150}px;width: {width}px"></div> -->
            <!-- <div class="sweeper"></div> -->
            <a class:active={$page.url.pathname === "/"} href="/">Home</a>
        </li>
        <li>
            <a class:active={regTours.test($page.url.pathname)} href="/tours"
                >Tours</a
            >
        </li>
        <li>
            <a class:active={regAbout.test($page.url.pathname)} href="/about"
                >About Us</a
            >
        </li>
        <!-- <li><a class:active={/^\/tours(?:\/[0-9a-zA-Z]+)?$/.test('/tours')} href="/tours">Tours</a></li> -->
    </ul>
    <!-- <div class="phone">
        {phone}
    </div> -->
</nav>

<style>
    nav {
        display: flex;
        flex-direction: column;
        position: fixed;
        z-index: 3;
        padding: 5px;
        height: var(--nav-height-mobile);
        background-color: white;
        width: 100%;
    }
    .logo {
        width: 150px;
        height: 100%;
        margin: 0 auto;
        padding: 10px;
        /* overflow: hidden; */
    }
    .logo img {
        width: 100%;
        /* height: 100%; */
        object-fit: cover;
    }
    .logo a {
        display: grid;
        height: 100%;
        place-items: center;
    }

    ul {
        display: flex;
        flex-direction: row;
        height: 100%;
    }

    ul li {
        position: relative;
        list-style: none;
        display: grid;
        place-content: center;
    }

    ul a {
        text-decoration: none;
        padding: 0.5em;
    }
    ul a,
    a:link,
    a:visited {
        color: var(--defaultTextColor);
    }
    .sweeper {
        position: absolute;
        height: 100%;
        width: 100%;
        z-index: -2;
        background-color: mediumpurple;
        transition: left 1s, width 1s;
    }
    a.active {
        font-weight: bold;
        background-color: goldenrod;
    }
    @media (min-width: 510px) {
        nav {
            flex-direction: row;
            height: var(--navBarHeight);
        }
        .logo {
            margin: 0;
        }
        ul li {
        }
    }
</style>
